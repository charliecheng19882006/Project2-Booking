(this.webpackJsonpbookingfrontend=this.webpackJsonpbookingfrontend||[]).push([[0],{208:function(e,t,a){},373:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),c=a.n(s),i=(a(208),a(34)),o=a(35),l=a(37),u=a(36),d=a(375),h=a(387),j=a(388),b=a(54),p=a(390),f=a(29),m=a.n(f),O=a(50),g=a(202),x=a(378),v=a(384),y=a(389),k=a(386),S="http://encoded-shape-326623.ue.r.appspot.com",w=function(e,t){var a="".concat(S,"/authenticate/").concat(t?"host":"guest");return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to log in");return e.json()}))},C=function(e,t){var a="".concat(S,"/register/").concat(t?"host":"guest");return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to register")}))},I=function(){var e=localStorage.getItem("authToken"),t="".concat(S,"/reservations");return fetch(t,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){if(200!==e.status)throw Error("Fail to get reservation list");return e.json()}))},D=function(){var e=localStorage.getItem("authToken"),t="".concat(S,"/stays/");return fetch(t,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){if(200!==e.status)throw Error("Fail to get stay list");return e.json()}))},T=function(e){var t=localStorage.getItem("authToken"),a=new URL("".concat(S,"/search/"));return a.searchParams.append("guest_number",e.guest_number),a.searchParams.append("checkin_date",e.checkin_date.format("YYYY-MM-DD")),a.searchParams.append("checkout_date",e.checkout_date.format("YYYY-MM-DD")),a.searchParams.append("lat",37),a.searchParams.append("lon",-122),fetch(a,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){if(200!==e.status)throw Error("Fail to search stays");return e.json()}))},F=function(e){var t=localStorage.getItem("authToken"),a="".concat(S,"/stays/").concat(e);return fetch(a,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){if(200!==e.status)throw Error("Fail to delete stay")}))},A=function(e){var t=localStorage.getItem("authToken"),a="".concat(S,"/reservations");return fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to book reservation")}))},R=function(e){var t=localStorage.getItem("authToken"),a="".concat(S,"/reservations/").concat(e);return fetch(a,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){if(200!==e.status)throw Error("Fail to cancel reservation")}))},M=function(e){var t=localStorage.getItem("authToken"),a="".concat(S,"/stays/reservations/").concat(e);return fetch(a,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){if(200!==e.status)throw Error("Fail to get reservations by stay");return e.json()}))},_=function(e){var t=localStorage.getItem("authToken"),a="".concat(S,"/stays");return fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e}).then((function(e){if(200!==e.status)throw Error("Fail to upload stay")}))},P=a(6),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).formRef=r.a.createRef(),e.state={asHost:!1,loading:!1},e.onFinish=function(){console.log("finish form")},e.handleLogin=Object(O.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.formRef.current,t.prev=1,t.next=4,a.validateFields();case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return");case 9:return e.setState({loading:!0}),t.prev=10,n=e.state.asHost,t.next=14,w(a.getFieldsValue(!0),n);case 14:r=t.sent,e.props.handleLoginSuccess(r.token,n),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(10),g.b.error(t.t1.message);case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[1,6],[10,18,21,24]])}))),e.handleRegister=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.formRef.current,t.prev=1,t.next=4,a.validateFields();case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return");case 9:return e.setState({loading:!0}),t.prev=10,t.next=13,C(a.getFieldsValue(!0),e.state.asHost);case 13:g.b.success("Register Successfully"),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(10),g.b.error(t.t1.message);case 19:return t.prev=19,e.setState({loading:!1}),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[1,6],[10,16,19,22]])}))),e.handleCheckboxOnChange=function(t){e.setState({asHost:t.target.checked})},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)("div",{style:{width:500,margin:"20px auto"},children:[Object(P.jsxs)(x.a,{ref:this.formRef,onFinish:this.onFinish,children:[Object(P.jsx)(x.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(P.jsx)(v.a,{disabled:this.state.loading,prefix:Object(P.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(P.jsx)(x.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(P.jsx)(v.a.Password,{disabled:this.state.loading,placeholder:"Password"})})]}),Object(P.jsxs)(y.b,{children:[Object(P.jsx)(k.a,{disabled:this.state.loading,checked:this.state.asHost,onChange:this.handleCheckboxOnChange,children:"As Host"}),Object(P.jsx)(b.a,{onClick:this.handleLogin,disabled:this.state.loading,shape:"round",type:"primary",children:"Log in"}),Object(P.jsx)(b.a,{onClick:this.handleRegister,disabled:this.state.loading,shape:"round",type:"primary",children:"Register"})]})]})}}]),a}(r.a.Component),Y=E,V=a(166),B=a(377),L=a(383),H=a(76),q=a(385),z=a(382),N=a(379),J=a(139),G=a(391),U=a(392),W=a(62),K=a.n(W),Q=a(108),X=a(381),Z={labelCol:{span:8},wrapperCol:{span:16}},$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={loading:!1},e.fileInputRef=r.a.createRef(),e.handleSubmit=function(){var t=Object(O.a)(m.a.mark((function t(a){var n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new FormData,!((r=e.fileInputRef.current.files).length>5)){t.next=5;break}return g.b.error("You can at most upload 5 pictures."),t.abrupt("return");case 5:for(s=0;s<r.length;s++)n.append("images",r[s]);return n.append("name",a.name),n.append("address",a.address),n.append("description",a.description),n.append("guest_number",a.guest_number),e.setState({loading:!0}),t.prev=11,t.next=14,_(n);case 14:g.b.success("upload successfully"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(11),g.b.error(t.t0.message);case 20:return t.prev=20,e.setState({loading:!1}),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[11,17,20,23]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)(x.a,Object(Q.a)(Object(Q.a)({},Z),{},{name:"nest-messages",onFinish:this.handleSubmit,style:{maxWidth:1e3,margin:"auto"},children:[Object(P.jsx)(x.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(P.jsx)(v.a,{})}),Object(P.jsx)(x.a.Item,{name:"address",label:"Address",rules:[{required:!0}],children:Object(P.jsx)(v.a,{})}),Object(P.jsx)(x.a.Item,{name:"description",label:"Description",rules:[{required:!0}],children:Object(P.jsx)(v.a.TextArea,{autoSize:{minRows:2,maxRows:6}})}),Object(P.jsx)(x.a.Item,{name:"guest_number",label:"Guest Number",rules:[{required:!0,type:"number",min:1}],children:Object(P.jsx)(X.a,{})}),Object(P.jsx)(x.a.Item,{name:"picture",label:"Picture",rules:[{required:!0}],children:Object(P.jsx)("input",{type:"file",accept:"image/png, image/jpeg",ref:this.fileInputRef,multiple:!0})}),Object(P.jsx)(x.a.Item,{wrapperCol:Object(Q.a)(Object(Q.a)({},Z.wrapperCol),{},{offset:8}),children:Object(P.jsx)(b.a,{type:"primary",htmlType:"submit",loading:this.state.loading,children:"Submit"})})]}))}}]),a}(r.a.Component),ee=$,te=V.a.TabPane,ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.handleRemoveStay=Object(O.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.stay,r=a.onRemoveSuccess,e.setState({loading:!0}),t.prev=2,t.next=5,F(n.id);case 5:r(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),g.b.error(t.t0.message);case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])}))),e}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsx)(b.a,{loading:this.state.loading,onClick:this.handleRemoveStay,danger:!0,shape:"round",type:"primary",children:"Remove Stay"})}}]),a}(r.a.Component),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,reservations:[]},e.loadData=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,M(e.props.stayId);case 4:a=t.sent,e.setState({reservations:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),g.b.error(t.t0.message);case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.reservations;return Object(P.jsx)(B.b,{loading:t,dataSource:a,renderItem:function(e){return Object(P.jsx)(B.b.Item,{children:Object(P.jsx)(B.b.Item.Meta,{title:Object(P.jsxs)(K.a,{children:["Guest Name: ",e.guest.username]}),description:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(K.a,{children:["Checkin Date: ",e.checkin_date]}),Object(P.jsx)("br",{}),Object(P.jsxs)(K.a,{children:["Checkout Date: ",e.checkout_date]})]})})})}})}}]),a}(r.a.Component),re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modalVisible:!1},e.openModal=function(){e.setState({modalVisible:!0})},e.handleCancel=function(){e.setState({modalVisible:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.stay,t=this.state.modalVisible,a="Reservations of ".concat(e.name);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(b.a,{onClick:this.openModal,shape:"round",children:"View Reservations"}),t&&Object(P.jsx)(L.a,{title:a,centered:!0,visible:t,closable:!1,footer:null,onCancel:this.handleCancel,destroyOnClose:!0,children:Object(P.jsx)(ne,{stayId:e.id})})]})}}]),a}(r.a.Component),se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modalVisible:!1},e.openModal=function(){e.setState({modalVisible:!0})},e.handleCancel=function(){e.setState({modalVisible:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.stay,t=e.name,a=e.description,n=e.address,r=e.guest_number,s=this.state.modalVisible;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(H.a,{title:"View Stay Details",children:Object(P.jsx)(b.a,{onClick:this.openModal,style:{border:"none"},size:"large",icon:Object(P.jsx)(J.a,{})})}),s&&Object(P.jsx)(L.a,{title:t,centered:!0,visible:s,closable:!1,footer:null,onCancel:this.handleCancel,children:Object(P.jsxs)(y.b,{direction:"vertical",children:[Object(P.jsx)(K.a,{strong:!0,children:"Description"}),Object(P.jsx)(K.a,{type:"secondary",children:a}),Object(P.jsx)(K.a,{strong:!0,children:"Address"}),Object(P.jsx)(K.a,{type:"secondary",children:n}),Object(P.jsx)(K.a,{strong:!0,children:"Guest Number"}),Object(P.jsx)(K.a,{type:"secondary",children:r})]})})]})}}]),a}(r.a.Component),ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,data:[]},e.loadData=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,D();case 4:a=t.sent,e.setState({data:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),g.b.error(t.t0.message);case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return Object(P.jsx)(B.b,{loading:this.state.loading,grid:{gutter:16,xs:1,sm:3,md:3,lg:3,xl:4,xxl:4},dataSource:this.state.data,renderItem:function(t){return Object(P.jsx)(B.b.Item,{children:Object(P.jsx)(q.a,{title:Object(P.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(P.jsx)(K.a,{ellipsis:!0,style:{maxWidth:150},children:t.name}),Object(P.jsx)(se,{stay:t})]}),actions:[Object(P.jsx)(re,{stay:t})],extra:Object(P.jsx)(ae,{stay:t,onRemoveSuccess:e.loadData}),children:Object(P.jsx)(z.a,{dots:!1,arrows:!0,prevArrow:Object(P.jsx)(G.a,{}),nextArrow:Object(P.jsx)(U.a,{}),children:t.images.map((function(e,t){return Object(P.jsx)("div",{children:Object(P.jsx)(N.a,{src:e.url,width:"100%"})},t)}))})},t.id)})}})}}]),a}(r.a.Component),ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)(V.a,{defaultActiveKey:"1",destroyInactiveTabPane:!0,children:[Object(P.jsx)(te,{tab:"My Stays",children:Object(P.jsx)(ce,{})},"1"),Object(P.jsx)(te,{tab:"Upload Stay",children:Object(P.jsx)(ee,{})},"2")]})}}]),a}(r.a.Component),oe=ie,le=a(380),ue=a(376),de=V.a.TabPane,he=le.a.Text,je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.handleCancelReservation=Object(O.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.reservationId,r=a.onCancelSuccess,e.setState({loading:!0}),t.prev=2,t.next=5,R(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),g.b.error(t.t0.message);case 10:return t.prev=10,e.setState({loading:!1}),t.finish(10);case 13:r();case 14:case"end":return t.stop()}}),t,null,[[2,7,10,13]])}))),e}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsx)(b.a,{loading:this.state.loading,onClick:this.handleCancelReservation,danger:!0,shape:"round",type:"primary",children:"Cancel Reservation"})}}]),a}(r.a.Component),be=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,modalVisible:!1},e.handleCancel=function(){e.setState({modalVisible:!1})},e.handleBookStay=function(){e.setState({modalVisible:!0})},e.handleSubmit=function(){var t=Object(O.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.stay,e.setState({loading:!0}),t.prev=2,t.next=5,A({checkin_date:a.checkin_date.format("YYYY-MM-DD"),checkout_date:a.checkout_date.format("YYYY-MM-DD"),stay:{id:n.id}});case 5:g.b.success("Successfully book stay"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),g.b.error(t.t0.message);case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.stay;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(b.a,{onClick:this.handleBookStay,shape:"round",type:"primary",children:"Book Stay"}),Object(P.jsx)(L.a,{destroyOnClose:!0,title:e.name,visible:this.state.modalVisible,footer:null,onCancel:this.handleCancel,children:Object(P.jsxs)(x.a,{preserve:!1,labelCol:{span:8},wrapperCol:{span:16},onFinish:this.handleSubmit,children:[Object(P.jsx)(x.a.Item,{label:"Checkin Date",name:"checkin_date",rules:[{required:!0}],children:Object(P.jsx)(ue.a,{})}),Object(P.jsx)(x.a.Item,{label:"Checkout Date",name:"checkout_date",rules:[{required:!0}],children:Object(P.jsx)(ue.a,{})}),Object(P.jsx)(x.a.Item,{wrapperCol:{offset:8,span:16},children:Object(P.jsx)(b.a,{loading:this.state.loading,type:"primary",htmlType:"submit",children:"Book"})})]})})]})}}]),a}(r.a.Component),pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:[],loading:!1},e.search=function(){var t=Object(O.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,T(a);case 4:n=t.sent,e.setState({data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),g.b.error(t.t0.message);case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(x.a,{onFinish:this.search,layout:"inline",children:[Object(P.jsx)(x.a.Item,{label:"Guest Number",name:"guest_number",rules:[{required:!0}],children:Object(P.jsx)(X.a,{min:1})}),Object(P.jsx)(x.a.Item,{label:"Checkin Date",name:"checkin_date",rules:[{required:!0}],children:Object(P.jsx)(ue.a,{})}),Object(P.jsx)(x.a.Item,{label:"Checkout Date",name:"checkout_date",rules:[{required:!0}],children:Object(P.jsx)(ue.a,{})}),Object(P.jsx)(x.a.Item,{children:Object(P.jsx)(b.a,{loading:this.state.loading,type:"primary",htmlType:"submit",children:"Submit"})})]}),Object(P.jsx)(B.b,{style:{marginTop:20},loading:this.state.loading,grid:{gutter:16,xs:1,sm:3,md:3,lg:3,xl:4,xxl:4},dataSource:this.state.data,renderItem:function(e){return Object(P.jsx)(B.b.Item,{children:Object(P.jsx)(q.a,{title:Object(P.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(P.jsx)(he,{ellipsis:!0,style:{maxWidth:150},children:e.name}),Object(P.jsx)(se,{stay:e})]}),extra:Object(P.jsx)(be,{stay:e}),children:Object(P.jsx)(z.a,{dots:!1,arrows:!0,prevArrow:Object(P.jsx)(G.a,{}),nextArrow:Object(P.jsx)(U.a,{}),children:e.images.map((function(e,t){return Object(P.jsx)("div",{children:Object(P.jsx)(N.a,{src:e.url,width:"100%"})},t)}))})},e.id)})}})]})}}]),a}(r.a.Component),fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,data:[]},e.loadData=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,I();case 4:a=t.sent,e.setState({data:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),g.b.error(t.t0.message);case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return Object(P.jsx)(B.b,{style:{width:1e3,margin:"auto"},loading:this.state.loading,dataSource:this.state.data,renderItem:function(t){return Object(P.jsx)(B.b.Item,{actions:[Object(P.jsx)(je,{onCancelSuccess:e.loadData,reservationId:t.id})],children:Object(P.jsx)(B.b.Item.Meta,{title:Object(P.jsx)(he,{children:t.stay.name}),description:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(he,{children:["Checkin Date: ",t.checkin_date]}),Object(P.jsx)("br",{}),Object(P.jsxs)(he,{children:["Checkout Date: ",t.checkout_date]})]})})})}})}}]),a}(r.a.Component),me=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(P.jsxs)(V.a,{defaultActiveKey:"1",destroyInactiveTabPane:!0,children:[Object(P.jsx)(de,{tab:"Search Stays",children:Object(P.jsx)(pe,{})},"1"),Object(P.jsx)(de,{tab:"My Reservations",children:Object(P.jsx)(fe,{})},"2")]})}}]),a}(r.a.Component),Oe=me,ge=d.a.Header,xe=d.a.Content,ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={authed:!1,asHost:!1},e.handleLoginSuccess=function(t,a){localStorage.setItem("authToken",t),localStorage.setItem("asHost",a),e.setState({authed:!0,asHost:a})},e.handleLogOut=function(){localStorage.removeItem("authToken"),localStorage.removeItem("asHost"),e.setState({authed:!1})},e.renderContent=function(){return e.state.authed?e.state.asHost?Object(P.jsx)(oe,{}):Object(P.jsx)(Oe,{}):Object(P.jsx)(Y,{handleLoginSuccess:e.handleLoginSuccess})},e.userMenu=Object(P.jsx)(h.a,{children:Object(P.jsx)(h.a.Item,{onClick:e.handleLogOut,children:"Log Out"},"logout")}),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("authToken"),t="true"===localStorage.getItem("asHost");this.setState({authed:null!==e,asHost:t})}},{key:"render",value:function(){return Object(P.jsxs)(d.a,{style:{height:"100vh"},children:[Object(P.jsxs)(ge,{style:{display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)("div",{style:{fontSize:16,fontWeight:600,color:"white"},children:"Stays Booking"}),this.state.authed&&Object(P.jsx)("div",{children:Object(P.jsx)(j.a,{trigger:"click",overlay:this.userMenu,children:Object(P.jsx)(b.a,{icon:Object(P.jsx)(p.a,{}),shape:"circle"})})})]}),Object(P.jsx)(xe,{style:{height:"calc(100% - 64px)",margin:20,overflow:"auto"},children:this.renderContent()})]})}}]),a}(r.a.Component),ye=ve,ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,393)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(ye,{})}),document.getElementById("root")),ke()}},[[373,1,2]]]);
//# sourceMappingURL=main.d51f429a.chunk.js.map